<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>ACampagneTest</title>
    <link rel="shortcut icon" href="assets/img/favicon.ico" type="image/x-icon">
    <link href='http://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="assets/bower_components/font-awesome/css/font-awesome.min.css">
    <link href="assets/dist/css/style.css" rel="stylesheet type=" text
    /css">
</head>
<body>

<div id="act" class="app">
    <section id="page-header" class="header page-header">
        <div class="hl">
            <div class="nav">
                <a href="" class="fa fa-navicon"></a>
            </div>
            <h1 class="title">A<span>Campagne</span>Test</h1>
        </div>
        <div class="hr">
            <nav class="nav">
                <ul class="clearfix">
                    <li class="alert"><a href="" class="fa fa-plus"></a></li>
                    <li class="alert"><a href="" class="fa fa-bell-o"></a></li>
                    <li class="user"><a href="">Alexandre Bury<i class="fa fa-angle-down"></i></a></li>
                </ul>
            </nav>
        </div>
    </section>

    <section id="page-container" class="page-container">
        <ul class="campaign-list clearfix">
            <li class="campaign-item">
                <div class="campaign">
                    <div class="container">
                        <div id="circle-1" class="circle" data-arcs="0.1,0.1,0.7,0.1">
                        </div>
                    </div>
                </div>
            </li>
            <li class="campaign-item status-ko">
                <div class="campaign">
                    <div class="container">
                        <div id="circle-1" class="circle" data-arcs="0.1,0.1,0.7,0.1">
                        </div>
                    </div>
                </div>
            </li>
            <li class="campaign-item status-ok">
                <div class="campaign">
                    <div class="container">
                        <div id="circle-2" class="circle" data-arcs="0.2,0.5,0.2,0.1">
                        </div>
                    </div>
                </div>
            </li>
            <li class="campaign-item status-progress">
                <div class="campaign">
                    <div class="container">
                        <div id="circle-3" class="circle" data-arcs="0.1,0.1,0.7,0.1">
                        </div>
                    </div>
                </div>
            </li>
            <li class="campaign-item status-ok">
                <div class="campaign">
                    <div class="container">
                        <div id="circle-4" class="circle" data-arcs="0.2,0.5,0.2,0.1">
                        </div>
                    </div>
                </div>
            </li>
            <li class="campaign-item status-progress">
                <div class="campaign">
                    <div class="container">
                        <div id="circle-5" class="circle" data-arcs="0.1,0.1,0.7,0.1">
                        </div>
                    </div>
                </div>
            </li>
            <!--<li class="campaign-item status-progress">
                <div class="campaign">
                    <div class="container">
                        <div id="circle-6" class="circle" data-arcs='[{"status": "standby","val": 0.1},{"status": "progress","val": 0.1{"status": "ok","val": 0.6},{"status": "ko","val": 0.2}]'>
                        </div>
                    </div>
                </div>
            </li>-->
        </ul>
    </section>
</div>

<script src="assets/bower_components/d3/d3.min.js"></script>

<script>
    var width = 100,
            height = 100,
            outerRadius = Math.min(width, height) * .5 - 10,
            innerRadius = outerRadius * .85;

    var n = 4,
            data = [0.2, 0.5, 0.2, 0.1];

    var color = ['#333333', '#f7ca18', '#2bb38a', '#e34b51'];

    var arc = d3.svg.arc();

    var pie = d3.layout.pie()
            .sort(null);

    d3.selectAll(".circle").each(function(d, i) {
        d3.select(this).style('color', '#c33');
        //console.log(d3.select(this).attr('data-arcs').split(',')[0])

        var data = d3.select(this).attr('data-arcs').split(',');

        var svg = d3.select(this).append("svg")
                .attr("width", width)
                .attr("height", height);


        svg.selectAll(".arc")
            //.data(arcs(data))
                .data(arcs(data))
                .enter().append("g")
                .attr("class", "arc")
                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
                .append("path")
                .attr("fill", function (d, i) {
                    return color[i];
                })
                .attr("d", arc);

    });

    //transition();

    function arcs(data) {
        var arcs = pie(data),
                i = -1,
                arc;
        while (++i < n) {
            arc = arcs[i];
            arc.innerRadius = innerRadius;
            arc.outerRadius = outerRadius;
        }
        return arcs;
    }


    //});
</script>
</body>
</html>